<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>sabre: Spatial Association Between REgionalizations • sabre</title>
<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" integrity="sha256-hIvIxeqhGZF+VVeM55k0mJvWpQ6gTkWk3Emc+NmowYA=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="sabre: Spatial Association Between REgionalizations">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sabre</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sabre.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Nowosad/sabre">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>sabre: Spatial Association Between REgionalizations</h1>
                        <h4 class="author">Jakub Nowosad</h4>
            
            <h4 class="date">2018-11-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Nowosad/sabre/blob/master/vignettes/sabre.Rmd"><code><a href="https://www.rdocumentation.org/packages/base/topics/Arithmetic">vignettes/sabre.Rmd</a></code></a></small>
      <div class="hidden name"><code>sabre.Rmd</code></div>

    </div>

    
    
<!--Introduction-->
<!--Jakub Nowosad and Tomasz Stepinski (2018). sabre: Spatial Association Between REgionalizations. R package version 0.2.0.-->
<p>The <strong>sabre</strong> (<strong>S</strong>patial <strong>A</strong>ssociation <strong>B</strong>etween <strong>RE</strong>gionalizations) is an R package for calculating a degree of spatial association between regionalizations or categorical maps. This package offers support for <code>sf</code> spatial objects, and the following methods:</p>
<ul>
<li>the V-measure method (Nowosad and Stepinski, 2018)</li>
<li>the MapCurve method (Hargrove et al., 2006)</li>
</ul>
<div id="basic-example---sabre" class="section level1">
<h1 class="hasAnchor">
<a href="#basic-example---sabre" class="anchor"></a>Basic example - SABRE</h1>
<p>Two simple regionalizations would be used to show the basic concept of <strong>sabre</strong>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sabre)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sf)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"regions1"</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"regions2"</span>)</a></code></pre></div>
<p>The first map, <code>regions1</code>, has four regions (“r1”, “r2”, “r3”, “r4”) of the same size and shape. The second one, <code>regions2</code>, contains three irregular regions where “z1” is the smallest and “z3” being the largest. Our goal is to compare these two regionalizations and calculate a degree of spatial association between them.</p>
<p><img src="sabre_files/figure-html/unnamed-chunk-2-1.png" width="45%"><img src="sabre_files/figure-html/unnamed-chunk-2-2.png" width="45%"></p>
<p>It can be done with <code><a href="../reference/vmeasure_calc.html">vmeasure_calc()</a></code>, which calculates “V-measure”, “Homogeneity”, and “Completeness” and returns two preprocessed input maps. This function requires, at least, four arguments:</p>
<ul>
<li>
<code>x</code> - an <code>sf</code> object containing the first regionalization</li>
<li>
<code>y</code> - an <code>sf</code> object containing the second regionalization</li>
<li>
<code>x_name</code> - a name of the column with regions names of the first regionalization</li>
<li>
<code>y_name</code> - a name of the column with regions names of the second regionalization</li>
</ul>
<p>Importantly, both <code>x</code> and <code>y</code> must contain <code>POLYGON</code>s or <code>MULTIPOLYGON</code>s and have the same coordinate reference system.</p>
<p>There are also two additional arguments - <code>B</code> and <code>precision</code>. If <code>B</code> &gt; 1 then completeness is weighted more strongly than homogeneity, and if <code>B</code> &lt; 1 then homogeneity is weighted more strongly than completeness. By default this value is 1. The <code><a href="../reference/vmeasure_calc.html">vmeasure_calc()</a></code> function calculates intersections of the input geometries internally using <code><a href="https://www.rdocumentation.org/packages/sf/topics/geos_binary_ops">sf::st_intersection()</a></code>, which depends on the coordinates values precision. The <code>precision</code> argument can be used when <code>vmeasure_calc</code> produces an error. For example, <code><a href="https://www.rdocumentation.org/packages/base/topics/assignOps">precision = 1000</a></code> rounds values to the third decimal places and <code><a href="https://www.rdocumentation.org/packages/base/topics/assignOps">precision = 0.001</a></code> uses values rounded to the nearest 1000.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">regions_vm =<span class="st"> </span><span class="kw"><a href="../reference/vmeasure_calc.html">vmeasure_calc</a></span>(<span class="dt">x =</span> regions1, <span class="dt">y =</span> regions2, <span class="dt">x_name =</span> z, <span class="dt">y_name =</span> z)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">regions_vm</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; The SABRE results:</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;  V-measure: 0.36 </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;  Homogeneity: 0.32 </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt;  Completeness: 0.42 </span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;  The spatial objects can be retrieved with:</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;  $map1 - the first map</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;  $map2 - the second map</span></a></code></pre></div>
<p>The result is a list with three metrics of spatial association - <code><a href="https://www.rdocumentation.org/packages/base/topics/Arithmetic">V-measure</a></code>, <code>Homogeneity</code>, <code>Completeness</code> - and two <code>sf</code> objects with preprocessed input maps - <code>$map1</code> and <code>$map2</code>. All of the above metrics are between 0 and 1, where larger values are desired. <code><a href="https://www.rdocumentation.org/packages/base/topics/Arithmetic">V-measure</a></code> is a measure of an overall spatial correspondence between input maps. <code>Homogeneity</code> shows an average homogeneity of the regions in the second map with respect to the regions in the first map. <code>Completeness</code> is a function of homogeneity of the regions in the first map with respect to the regions in the second map. The spatial outputs, <code>$map1</code> and <code>$map2</code>, have two columns. The first one contains regions’ names and the second one (<code>rih</code>) describes regions’ inhomogeneities. Geometries of these spatial outputs show intersections of the two input regionalizations.</p>
<p><img src="sabre_files/figure-html/unnamed-chunk-4-1.png" width="45%"><img src="sabre_files/figure-html/unnamed-chunk-4-2.png" width="45%"></p>
<p>For example, “Map1” shows that three regions have the same inhomogeneity of 0.48. This is due a fact that all of these three have two regions from the second map. The upper left region has a larger inhomogeneity of 0.86 as its area “belongs” to three different regions in the second map. More information about this method and its applications can be found in Nowosad and Stepinski (2018).</p>
</div>
<div id="basic-example---mapcurves" class="section level1">
<h1 class="hasAnchor">
<a href="#basic-example---mapcurves" class="anchor"></a>Basic example - MapCurves</h1>
<p>The <strong>sabre</strong> also allows for calculating a degree of spatial association between regionalizations using the MapCurve method (Hargrove et al., 2006). The <code><a href="../reference/mapcurves_calc.html">mapcurves_calc()</a></code> function also requires four arguments, <code>x</code>, <code>x_name</code>, <code>y</code>, and <code>y_name</code>. It also accepts an additional argument - <code>precision</code>. All of these arguments are explained in the previous section.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">regions_mc =<span class="st"> </span><span class="kw"><a href="../reference/mapcurves_calc.html">mapcurves_calc</a></span>(<span class="dt">x =</span> regions1, <span class="dt">y =</span> regions2, <span class="dt">x_name =</span> z, <span class="dt">y_name =</span> z)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">regions_mc</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; The MapCurves results:</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;  The goodness of fit: 0.61 </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;  Reference map: x </span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;  The spatial objects can be retrieved with:</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;  $map1 - the first map</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  $map2 - the second map</span></a></code></pre></div>
<p>The <code><a href="../reference/mapcurves_calc.html">mapcurves_calc()</a></code> returns a list with a value of the goodness of fit (GOF), the map used as a reference, and two <code>sf</code> objects with preprocessed input maps - <code>$map1</code> and <code>$map2</code>. Read Hargrove et al. (2006) to learn more about this method.</p>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<ul>
<li>Nowosad, Jakub, and Tomasz F. Stepinski. “Spatial association between regionalizations using the information-theoretical V-measure.” International Journal of Geographical Information Science (2018). <a href="https://doi.org/10.1080/13658816.2018.1511794" class="uri">https://doi.org/10.1080/13658816.2018.1511794</a>
</li>
<li>Rosenberg, Andrew, and Julia Hirschberg. “V-measure: A conditional entropy-based external cluster evaluation measure.” Proceedings of the 2007 joint conference on empirical methods in natural language processing and computational natural language learning (EMNLP-CoNLL). 2007.</li>
<li>Hargrove, William W., Forrest M. Hoffman, and Paul F. Hessburg. “Mapcurves: a quantitative method for comparing categorical maps.” Journal of Geographical Systems 8.2 (2006): 187.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#basic-example---sabre">Basic example - SABRE</a></li>
      <li><a href="#basic-example---mapcurves">Basic example - MapCurves</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jakub Nowosad, Tomasz Stepinski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
